<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>Dosya - Klasör Silme</title>
    <style>
        body { margin: 0; overflow: hidden; background: #2c3e50; font-family: 'Segoe UI', sans-serif; color: #ecf0f1; user-select: none; }
        #game-container { position: relative; width: 100vw; height: 100vh; }

        /* SAĞ TARAF SKOR VE KONTROL PANELİ */
        #side-panel {
            position: absolute; top: 20px; right: 20px; width: 180px;
            display: flex; flex-direction: column; gap: 15px; z-index: 100;
        }
        .panel-box {
            background: rgba(44, 62, 80, 0.95); padding: 15px; border-radius: 12px;
            border: 2px solid #34495e; box-shadow: 5px 5px 15px rgba(0,0,0,0.3);
        }
        .stat-box { display: flex; flex-direction: column; border-bottom: 1px solid #5d6d7e; padding-bottom: 5px; margin-bottom: 10px; }
        .stat-label { font-size: 0.7em; color: #bdc3c7; text-transform: uppercase; }
        .stat-value { font-size: 1.2em; font-weight: bold; color: #f1c40f; }

        .nav-controls { display: flex; justify-content: space-between; gap: 8px; }
        .nav-btn {
            background: #34495e; color: white; border: 1px solid #5d6d7e;
            padding: 8px; border-radius: 6px; cursor: pointer; flex: 1; transition: 0.3s;
        }
        .nav-btn:hover:not(:disabled) { background: #3498db; }
        .nav-btn:disabled { opacity: 0.3; cursor: not-allowed; }

        /* ÜST SABİT BAŞLIK VE TALİMATLAR */
        #header-container {
            position: absolute; top: 20px; left: 50%; transform: translateX(-50%);
            z-index: 90; text-align: center; width: 100%; pointer-events: none;
        }
        #level-title { font-size: 1.8em; font-weight: bold; color: #3498db; margin-bottom: 8px; text-shadow: 2px 2px 4px rgba(0,0,0,0.5); }
        #instructions {
            background: rgba(52, 152, 219, 0.2); padding: 10px 25px; border-radius: 10px;
            border-left: 6px solid #3498db; display: inline-block; pointer-events: auto;
            max-width: 550px; line-height: 1.4; font-size: 1em;
        }

        /* DOSYA TASARIMLARI */
        .file {
            width: 80px; height: 90px; background: #f1c40f; border-radius: 8px; position: absolute;
            cursor: pointer; display: flex; flex-direction: column; align-items: center; justify-content: center;
            font-size: 0.75em; font-weight: bold; color: #2c3e50; border: 2px solid #d4ac0d; transition: transform 0.2s, opacity 0.2s;
        }
        .file i { font-size: 30px; margin-bottom: 5px; color: #e67e22; }
        .file.selected { border: 3px solid #e74c3c; box-shadow: 0 0 15px #e74c3c; z-index: 10; }
        .file.permanent { background: #e74c3c; border-color: #c0392b; color: white; }
        .file.permanent i { color: #fff; }

        /* ÇÖP KUTUSU SİMGESİ */
        #trash-bin {
            position: absolute; bottom: 30px; right: 230px; width: 130px; height: 150px;
            background: #7f8c8d; border: 4px dashed #ecf0f1; border-radius: 15px;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            cursor: pointer; z-index: 50; transition: 0.2s;
        }
        #trash-bin.drag-over { background: #27ae60; transform: scale(1.1); }

        /* ÇÖP KUTUSU PENCERESİ */
        #trash-viewer {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            width: 450px; height: 350px; background: #fff; color: #333;
            border-radius: 12px; display: none; flex-direction: column; z-index: 1000;
            box-shadow: 0 0 50px rgba(0,0,0,0.6);
        }
        #trash-header { background: #34495e; color: white; padding: 12px; display: flex; justify-content: space-between; border-radius: 12px 12px 0 0; }
        #trash-list { flex: 1; padding: 10px; overflow-y: auto; list-style: none; margin: 0; }
        #trash-list li { padding: 8px; border-bottom: 1px solid #eee; display: flex; align-items: center; gap: 10px; }
        #trash-list li:hover { background: #f0f7ff; }
        #trash-footer { background: #f8f9fa; padding: 10px; border-top: 1px solid #ddd; display: flex; justify-content: space-between; align-items: center; }

        /* SAĞ TIK MENÜLERİ */
        .context-menu { position: absolute; background: #fff; color: #333; display: none; z-index: 2000; border: 1px solid #ccc; border-radius: 4px; min-width: 160px; box-shadow: 2px 2px 10px rgba(0,0,0,0.2); }
        .context-menu li { padding: 8px 15px; cursor: pointer; list-style: none; font-size: 0.85em; border-bottom: 1px solid #f0f0f0; }
        .context-menu li.disabled { color: #ccc; cursor: default; }
        .context-menu li.active { color: #2c3e50; font-weight: 500; }
        .context-menu li.active:hover { background: #3498db; color: #fff; }

        #level-complete {
            position: absolute; top:0; left:0; width:100%; height:100%;
            background: rgba(0,0,0,0.9); display: none; flex-direction: column;
            align-items: center; justify-content: center; z-index: 3000;
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>

    <div id="game-container">
        <div id="side-panel">
            <div class="panel-box">
                <div class="stat-box"><span class="stat-label">BÖLÜM</span><span id="st-lvl" class="stat-value">1</span></div>
                <div class="stat-box"><span class="stat-label">SKOR</span><span id="st-score" class="stat-value">0</span></div>
                <div class="stat-box"><span class="stat-label">ÇÖP KUTUSU</span><span id="st-trash" class="stat-value">0</span></div>
            </div>
            <div class="panel-box">
                <div class="nav-controls">
                    <button class="nav-btn" id="btn-p" onclick="navLvl(-1)"><i class="fas fa-arrow-left"></i></button>
                    <button class="nav-btn" id="btn-n" onclick="navLvl(1)"><i class="fas fa-arrow-right"></i></button>
                </div>
            </div>
        </div>

        <div id="header-container">
            <div id="level-title">BÖLÜM BAŞLIĞI</div>
            <div id="instructions">Talimatlar...</div>
        </div>

        <div id="trash-bin" onclick="openTrash(true)">
            <i class="fas fa-trash-alt" style="font-size: 45px; margin-bottom: 8px;"></i>
            <span style="font-size: 0.8em; font-weight: bold;">GERİ DÖNÜŞÜM KUTUSU</span>
        </div>

        <div id="trash-viewer">
            <div id="trash-header"><span>Geri Dönüşüm Kutusu</span><span onclick="openTrash(false)" style="cursor:pointer">X</span></div>
            <ul id="trash-list"></ul>
            <div id="trash-footer">
                <button id="empty-bin-btn" onclick="emptyTrash()" style="display:none; padding: 5px 10px; background: #e74c3c; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 0.8em;">Çöpü Boşalt</button>
                <span style="font-size: 0.7em; color: #666;">* Sağ tıkla ve Geri Yükle!</span>
            </div>
        </div>

        <div id="desktop-menu" class="context-menu">
            <li class="disabled">Aç</li>
            <li class="disabled">Kes</li>
            <li class="disabled">Kopyala</li>
            <li class="active" onclick="doAction('del')">Sil (Geri Dönüşüme Gönder)</li>
            <li class="disabled">Özellikler</li>
        </div>

        <div id="trash-menu" class="context-menu">
            <li class="active" id="res-btn">Geri Yükle</li>
            <li class="disabled">Kes</li>
            <li class="disabled">Özellikler</li>
        </div>

        <div id="level-complete">
            <h1 style="color: #f1c40f; font-size: 3em;">TEBRİKLER!</h1>
            <button onclick="navLvl(1)" style="padding: 15px 40px; background: #27ae60; color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: bold;">DEVAM ET</button>
        </div>
    </div>

    <script>
        const lvls = [
            { t: "Bölüm 1: Dosya - Klasör Silme", i: "Sarı dosyaları sürükleyerek veya sağ tık ile silin.", n: 3, p: 0, m: "del" },
            { t: "Bölüm 2: Shift + Delete - Kalıcı Silme", i: "Kırmızı dosyaları sadece klavyeden SHIFT+DELETE ile silebilirsiniz.", n: 4, p: 2, m: "del" },
            { t: "Bölüm 3: Dosyaları Kurtarma", i: "Dosyaları silin, sonra çöp kutusunu açıp sağ tıklayarak Geri Yükleyin!", n: 3, p: 0, m: "res" },
            { t: "Bölüm 4: Çöpü Temizleme - Boşaltma", i: "Dosyaları silin, ardından çöp kutusuna girip 'Çöpü Boşalt' butonuyla yok edin!", n: 3, p: 0, m: "empty" }
        ];

        let s = { lvl: 1, score: 0, trash: [], selected: null, restored: 0, emptied: false };

        function init() {
            document.querySelectorAll('.file').forEach(f => f.remove());
            s.trash = []; s.selected = null; s.restored = 0; s.emptied = false;
            const c = lvls[s.lvl - 1];
            document.getElementById('level-title').innerText = c.t;
            document.getElementById('instructions').innerText = c.i;
            document.getElementById('st-lvl').innerText = s.lvl;
            document.getElementById('level-complete').style.display = 'none';
            document.getElementById('empty-bin-btn').style.display = (c.m === "empty") ? "block" : "none";
            document.getElementById('btn-p').disabled = (s.lvl === 1);
            document.getElementById('btn-n').disabled = (s.lvl === lvls.length);
            for(let i=0; i<c.n; i++) spawn(i < c.p, i);
            updateUI();
        }

        function spawn(isP, i, x=null, y=null, name=null) {
            const f = document.createElement('div');
            f.className = `file ${isP ? 'permanent' : ''}`;
            const fName = name || (isP ? "SİSTEM_"+(i+1) : "DOSYA_"+(i+1));
            f.innerHTML = `<i class="fas ${isP ? 'fa-lock' : 'fa-file'}"></i><span>${fName}</span>`;
            f.style.left = x || (Math.random() * (window.innerWidth - 500) + 150) + "px";
            f.style.top = y || (Math.random() * (window.innerHeight - 400) + 200) + "px";
            f.dataset.name = fName; f.dataset.x = f.style.left; f.dataset.y = f.style.top;
            
            f.onmousedown = (e) => { 
                if(s.selected) s.selected.classList.remove('selected'); 
                s.selected = f; f.classList.add('selected'); 
                e.stopPropagation(); 
            };
            
            f.oncontextmenu = (e) => { 
                e.preventDefault(); 
                const m = document.getElementById('desktop-menu'); 
                m.style.display = 'block'; m.style.left = e.pageX + "px"; m.style.top = e.pageY + "px"; 
            };
            
            f.draggable = true;
            f.ondragstart = (e) => { s.selected = f; };
            
            document.getElementById('game-container').appendChild(f);
        }

        function doAction(method) {
            if(!s.selected) return;
            const isP = s.selected.classList.contains('permanent');
            
            if(isP && method !== 'shift') {
                alert("DİKKAT: Sistem dosyaları sadece SHIFT + DELETE ile kalıcı olarak silinebilir!");
                return;
            }

            if(method !== 'shift') {
                s.trash.push({ name: s.selected.dataset.name, x: s.selected.dataset.x, y: s.selected.dataset.y });
            }
            
            s.score += (method === 'shift' ? 25 : 10);
            s.selected.remove(); s.selected = null;
            updateUI(); check();
        }

        function updateUI() {
            document.getElementById('st-trash').innerText = s.trash.length;
            document.getElementById('st-score').innerText = s.score;
            const list = document.getElementById('trash-list');
            list.innerHTML = "";
            s.trash.forEach((item, idx) => {
                const li = document.createElement('li');
                li.innerHTML = `<i class="fas fa-file"></i> ${item.name}`;
                li.oncontextmenu = (e) => {
                    e.preventDefault();
                    const m = document.getElementById('trash-menu');
                    m.style.display = 'block'; m.style.left = e.pageX + "px"; m.style.top = e.pageY + "px";
                    document.getElementById('res-btn').onclick = () => {
                        const itm = s.trash[idx]; s.trash.splice(idx, 1);
                        spawn(false, 0, itm.x, itm.y, itm.name);
                        s.restored++; s.score += 30; m.style.display = 'none'; updateUI(); check();
                    };
                };
                list.appendChild(li);
            });
        }

        function emptyTrash() {
            if(s.trash.length === 0) return;
            s.score += s.trash.length * 20;
            s.trash = []; s.emptied = true;
            alert("Geri Dönüşüm Kutusu boşaltıldı!");
            updateUI(); check();
        }

        function check() {
            const c = lvls[s.lvl - 1];
            const onScr = document.querySelectorAll('.file').length;
            if(c.m === "del" && onScr === 0) showWin();
            if(c.m === "res" && s.restored >= c.n) showWin();
            if(c.m === "empty" && onScr === 0 && s.emptied) showWin();
        }

        function showWin() { document.getElementById('level-complete').style.display = 'flex'; }

        function navLvl(d) {
            s.lvl += d;
            if(s.lvl < 1) s.lvl = 1;
            if(s.lvl > lvls.length) s.lvl = 1;
            init();
        }

        function openTrash(b) { document.getElementById('trash-viewer').style.display = b ? 'flex' : 'none'; }
        
        window.onclick = () => document.querySelectorAll('.context-menu').forEach(m => m.style.display = 'none');
        
        window.onkeydown = (e) => { 
            if(e.key === "Delete") doAction(e.shiftKey ? 'shift' : 'del'); 
        };
        
        const bin = document.getElementById('trash-bin');
        bin.ondragover = (e) => { e.preventDefault(); bin.classList.add('drag-over'); };
        bin.ondragleave = () => bin.classList.remove('drag-over');
        bin.ondrop = (e) => { e.preventDefault(); bin.classList.remove('drag-over'); doAction('drag'); };

        init();
    </script>
</body>
</html>