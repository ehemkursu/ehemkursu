<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>Klavye UstasÄ±: Tam SÃ¼rÃ¼m</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, sans-serif; text-align: center; background-color: #1a1a2e; color: #fff; padding: 20px; }
        .container { background: #16213e; max-width: 850px; margin: 0 auto; padding: 30px; border-radius: 20px; border: 3px solid #4db8ff; }
        .level-info { font-size: 22px; background: #e94560; padding: 8px 30px; border-radius: 30px; display: inline-block; margin-bottom: 15px; font-weight: bold; }
        .instruction-text { font-size: 24px; margin: 15px 0; color: #ffd369; min-height: 45px; }
        .word-box { font-size: 60px; letter-spacing: 12px; margin: 30px 0; padding: 25px; background: #fff; color: #333; border-radius: 15px; display: inline-block; min-width: 500px; font-family: 'Courier New', monospace; box-shadow: inset 0 0 10px rgba(0,0,0,0.2); }
        .cursor { display: inline-block; width: 8px; height: 65px; background-color: #ff0000; vertical-align: middle; margin: 0 -4px; animation: blink 0.8s infinite; }
        @keyframes blink { 50% { opacity: 0; } }
        #message { font-size: 28px; font-weight: bold; height: 40px; margin-bottom: 10px; }
        .success { color: #4ee44e; }
        .error { color: #ff4d4d; }
        .hint { margin-top: 20px; color: #8892b0; font-size: 16px; }
    </style>
</head>
<body>

<div class="container">
    <div class="level-info" id="level-title">BAÅLATILIYOR...</div>
    <div class="instruction-text" id="instruction"></div>
    <div id="message"></div>
    <div class="word-box" id="display"></div>
    <div style="font-size: 20px; margin-top: 10px;">
        Puan: <span id="score">0</span> | Kelime: <span id="word-count">1</span>/10
    </div>
    <div class="hint">Hareket: <b>â† â†’</b> | Silme: <b>Backspace</b> veya <b>Delete</b></div>
</div>

<script>
    const levels = {
        1: [
            { text: "MA7SA", cur: 3, key: "Backspace", msg: "7 rakamÄ±nÄ± BACKSPACE ile sil!" },
            { text: "BÄ°0LGÄ°", cur: 2, key: "Delete", msg: "0 rakamÄ±nÄ± DELETE ile sil!" },
            { text: "KÄ°TAPx", cur: 5, key: "Delete", msg: "x harfini DELETE ile sil!" },
            { text: "DE9NÄ°Z", cur: 3, key: "Backspace", msg: "9 rakamÄ±nÄ± BACKSPACE ile sil!" },
            { text: "OKUuL", cur: 3, key: "Delete", msg: "u harfini DELETE ile sil!" },
            { text: "KAL1EM", cur: 4, key: "Backspace", msg: "1 rakamÄ±nÄ± BACKSPACE ile sil!" },
            { text: "ELM!A", cur: 4, key: "Backspace", msg: "! iÅŸaretini BACKSPACE ile sil!" },
            { text: "BÄ°SÄ°3KLET", cur: 4, key: "Backspace", msg: "3 rakamÄ±nÄ± BACKSPACE ile sil!" },
            { text: "F%ARE", cur: 1, key: "Delete", msg: "% iÅŸaretini DELETE ile sil!" },
            { text: "CAÂ½M", cur: 2, key: "Delete", msg: "Â½ iÅŸaretini DELETE ile sil!" }
        ],
        2: [
            { text: "KA77LEM", cur: 4, key: "Backspace", count: 2, msg: "77 rakamlarÄ±nÄ± BACKSPACE ile sil!" },
            { text: "ELMAxx", cur: 4, key: "Delete", count: 2, msg: "xx harflerini DELETE ile sil!" },
            { text: "BÄ°LLGÄ°", cur: 2, key: "Delete", count: 2, msg: "LL harflerini DELETE ile sil!" },
            { text: "DEFFTER", cur: 4, key: "Backspace", count: 2, msg: "FF harflerini BACKSPACE ile sil!" },
            { text: "OKUUL", cur: 3, key: "Delete", count: 2, msg: "UU harflerini DELETE ile sil!" },
            { text: "SIRRRA", cur: 4, key: "Backspace", count: 2, msg: "RR harflerini BACKSPACE ile sil!" },
            { text: "MÃœZÄ°KK", cur: 5, key: "Delete", count: 2, msg: "KK harflerini DELETE ile sil!" },
            { text: "Ã‡ANNTTA", cur: 4, key: "Backspace", count: 2, msg: "NN harflerini BACKSPACE ile sil!" },
            { text: "RESÄ°MM", cur: 5, key: "Delete", count: 2, msg: "MM harflerini DELETE ile sil!" },
            { text: "DERRS", cur: 4, key: "Backspace", count: 2, msg: "RR harflerini BACKSPACE ile sil!" }
        ],
        3: [
            { text: "TEKnNOLOJÄ°", cur: 0, targetChar: "n", key: "Delete", msg: "Ä°lerleyerek 'n' harfini DELETE ile sil!" },
            { text: "BÄ°LGÄ°SAY4AR", cur: 11, targetChar: "4", key: "Backspace", msg: "Geri giderek '4' rakamÄ±nÄ± BACKSPACE ile sil!" },
            { text: "Ä°ST7ANBUL", cur: 0, targetChar: "7", key: "Delete", msg: "Ä°lerleyerek '7' rakamÄ±nÄ± DELETE ile sil!" },
            { text: "KLAVxYE", cur: 7, targetChar: "x", key: "Backspace", msg: "Geri giderek 'x' harfini BACKSPACE ile sil!" },
            { text: "Ã–ÄRE0NCÄ°", cur: 0, targetChar: "0", key: "Delete", msg: "Ä°lerleyerek '0' rakamÄ±nÄ± DELETE ile sil!" },
            { text: "AN3KARA", cur: 7, targetChar: "3", key: "Backspace", msg: "Geri giderek '3' rakamÄ±nÄ± BACKSPACE ile sil!" },
            { text: "FA5RE", cur: 0, targetChar: "5", key: "Delete", msg: "Ä°lerleyerek '5' rakamÄ±nÄ± DELETE ile sil!" },
            { text: "SÄ°LGÄ°9", cur: 0, targetChar: "9", key: "Delete", msg: "Ä°lerleyerek '9' rakamÄ±nÄ± DELETE ile sil!" },
            { text: "B2URSA", cur: 6, targetChar: "2", key: "Backspace", msg: "Geri giderek '2' rakamÄ±nÄ± BACKSPACE ile sil!" },
            { text: "ORxDU", cur: 0, targetChar: "x", key: "Delete", msg: "Ä°lerleyerek 'x' harfini DELETE ile sil!" }
        ]
    };

    let currentLvl = 1;
    let currentIdx = 0;
    let score = 0;
    let currentText = "";
    let playerPos = 0;
    let neededStrikes = 1;

    function initLevel() {
        const data = levels[currentLvl][currentIdx];
        currentText = data.text;
        playerPos = data.cur;
        neededStrikes = data.count || 1;
        document.getElementById('level-title').innerText = "TUR " + currentLvl;
        document.getElementById('message').innerText = "";
        render();
    }

    function render() {
        const display = document.getElementById('display');
        document.getElementById('instruction').innerText = levels[currentLvl][currentIdx].msg;
        document.getElementById('word-count').innerText = currentIdx + 1;
        document.getElementById('score').innerText = score;

        let before = currentText.substring(0, playerPos);
        let after = currentText.substring(playerPos);
        display.innerHTML = before + '<span class="cursor"></span>' + after;
    }

    window.addEventListener('keydown', (e) => {
        if (currentLvl > 3) return;

        // Navigasyon: Ok tuÅŸlarÄ± her zaman Ã§alÄ±ÅŸÄ±r
        if (e.key === "ArrowLeft") {
            if (playerPos > 0) { playerPos--; render(); }
            return;
        }
        if (e.key === "ArrowRight") {
            if (playerPos < currentText.length) { playerPos++; render(); }
            return;
        }

        const data = levels[currentLvl][currentIdx];

        if (e.key === "Backspace") {
            if (playerPos > 0) {
                const charToDelete = currentText[playerPos - 1];
                // Tur 3'te karakter kontrolÃ¼, diÄŸerlerinde tuÅŸ kontrolÃ¼
                let isCorrect = (currentLvl === 3) ? (charToDelete === data.targetChar && e.key === data.key) : (e.key === data.key);
                
                if (isCorrect) {
                    currentText = currentText.substring(0, playerPos - 1) + currentText.substring(playerPos);
                    playerPos--;
                    handleAction(true);
                } else {
                    handleAction(false);
                }
            }
        } 
        else if (e.key === "Delete") {
            if (playerPos < currentText.length) {
                const charToDelete = currentText[playerPos];
                let isCorrect = (currentLvl === 3) ? (charToDelete === data.targetChar && e.key === data.key) : (e.key === data.key);

                if (isCorrect) {
                    currentText = currentText.substring(0, playerPos) + currentText.substring(playerPos + 1);
                    handleAction(true);
                } else {
                    handleAction(false);
                }
            }
        }
    });

    function handleAction(isCorrect) {
        const msgEl = document.getElementById('message');
        if (isCorrect) {
            neededStrikes--;
            render();
            if (neededStrikes <= 0) {
                score += 10;
                msgEl.innerText = "DOÄRU TUÅ! âœ…";
                msgEl.className = "success";
                currentIdx++;
                if (currentIdx >= 10) {
                    currentIdx = 0;
                    currentLvl++;
                }
                setTimeout(() => {
                    if (currentLvl > 3) finishGame();
                    else initLevel();
                }, 600);
            }
        } else {
            score = Math.max(0, score - 5);
            msgEl.innerText = "YANLIÅ TUÅ! âŒ";
            msgEl.className = "error";
            setTimeout(() => { initLevel(); }, 600);
        }
    }

    function finishGame() {
        document.getElementById('level-title').innerText = "FÄ°NAL";
        document.getElementById('display').innerHTML = "TEBRÄ°KLER! ğŸ†";
        document.getElementById('instruction').innerText = "Silme eÄŸitimini baÅŸarÄ±yla tamamladÄ±n.";
        document.getElementById('message').innerText = "";
    }

    initLevel();
</script>
</body>
</html>